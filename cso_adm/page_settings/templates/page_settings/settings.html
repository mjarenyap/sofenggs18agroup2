<!--TODO: connect backend to frontend (implement this app's modal.js then make necessary changes in the HTML file;-->
<!--TODO: make it parallel to dashboard's edit post acts functionality)-->
<!--TODO: add change useradmin form-->

{% load staticfiles %}
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
    <head>
        <title>CSO Dashboard</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
        <link href="{% static 'dashboard/css/theme.css' %}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'dashboard/css/table-style.css' %}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'dashboard/css/pseudo.css' %}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'dashboard/css/modal-style.css' %}" rel="stylesheet" type="text/css"/>

        <script src="{% static 'dashboard/js/jquery-3.2.1.min.js' %}" type="text/javascript"></script>
        <!--<script src="js/angular.js" type="text/javascript"></script>-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.2/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

        <script src="{% static 'page_settings/js/js-angular-filter.js' %}" type="text/javascript"></script>
        <script src="{% static 'page_settings/js/modal.js' %}" type="text/javascript"></script>
        <script src="{% static 'dashboard/js/settings-normalize.js' %}" type="text/javascript"></script>
        <script src="{% static 'dashboard/js/settings.js' %}" type="text/javascript"></script>
        <script src="{% static 'dashboard/js/modal.js' %}" type="text/javascript"></script>
        <script src="{% static 'dashboard/js/sign-in.js' %}" type="text/javascript"></script>
    </head>
    <body ng-app="dashboardApp" ng-controller="mainController">
        <div id="modal-wrapper">
            <i class="fa fa-times close"></i>
            <div id="modal-details-wrapper-settings" class="modal-smaller">
                <ul class="tab-wrapper">
                    <li class="active" ng-show="activeModal('edit')">Change user account details</li>
                    <li class="active" ng-show="activeModal('add')">Add user account</li>
                    <li class="active" ng-show="activeModal('del')">Remove account(s)</li>
                    <li class="active" ng-show="activeModal('test')">Test Modal Title</li>
                </ul>
                <div class="content-wrapper visible" id="csoDetails" ng-show="activeModal('edit')">
                    <form id="modalEditUser" method="post">
                        {% csrf_token %}
                        <div>
                            <b>Username</b>
                            <input id="oldUsername" type="hidden" ng-value="modalOldUsername">
                            <input id="username" class="inpEditMod" type="text" ng-model="modalUsername">
                        </div>
                        <div>
                            <b>New Password</b>
                            <input id="password" class="inpEditMod" type="password">
                        </div>
                        <div>
                            <b>Confirm Password</b>
                            <input class="inpEditMod" type="password">
                        </div>

                        <p class="form-error" id="err-mod-edit-uregex">Username should have 6-25 characters only have alphanumeric characters and '_'.</p>
                        <p class="form-error" id="err-mod-edit-pmatch">Passwords do not match.</p>
                        <p class="form-error" id="err-mod-edit-pregex">Password should have 6-25 characters and should only contain alphanumeric characters or '_'.</p>
                    <button type="submit" class="button">Save</button>
                    </form>
                </div>
                <div class="content-wrapper visible" ng-show="activeModal('add')">
                    <form id="modalAddUser" method="post">
                        {% csrf_token %}
                        <div>
                            <b>First Name</b>
                            <input id="firstName" class="inpAddMod" type="text">
                        </div>
                        <div>
                            <b>Last Name</b>
                            <input id="lastName" class="inpAddMod" type="text">
                        </div>
                        <div>
                            <b>Username</b>
                            <input id="username" class="inpAddMod" type="text">
                        </div>
                        <div>
                            <b>Email</b>
                            <input id="email" class="inpAddMod" type="text">
                        </div>
                        <div>
                            <b>Password</b>
                            <input id="password" class="inpAddMod" type="password">
                        </div>
                        <div>
                            <b>Confirm Password</b>
                            <input id="confPassword" class="inpAddMod" type="password">
                        </div>
                        <p class="form-error" id="err-mod-add-uregex">Username should have 6-25 characters only have alphanumeric characters and '_'.</p>
                        <p class="form-error" id="err-mod-add-eregex">Invalid email.</p>
                        <p class="form-error" id="err-mod-add-pmatch">Passwords do not match.</p>
                        <p class="form-error" id="err-mod-add-pregex">Password should have 6-25 characters and should only contain alphanumeric characters or '_'.</p>
                    <button type="submit" class="button">Add</button>
                    </form>
                </div>
                <div class="content-wrapper visible" ng-show="activeModal('del')">
                    <form id="modalDeleteUser" method="post">
                        <div class="label-delete">
                            <b>Delete the following users?</b>
                        </div>
                        {% verbatim %}
                        <div ng-repeat="du in delUsers" class="label-delete-name">
                            <p>{{du.firstName}} {{du.lastName}}</p>
                        </div>
                        {% endverbatim %}
                        <button type="submit" class="button">Delete</button>
                    </form>
                </div>
                <div class="content-wrapper visible" ng-show="activeModal('test')">
                    <form id="test-modal-id" method="post">
                        <div class="label-delete">
                            <b>Are you sure you want to change the following sheet settings:</b>
                        </div>
                        <p>Worksheet key</p>
                        <p>Sheet name</p>
                        <button type="submit" class="button grey">No</button>
                        <button type="submit" class="button">Yes</button>
                    </form>
                </div>
            </div>
        </div>
        <nav>
            <a href="{% url 'dashboard:index' %}" class="logo-banner">
                        <img src="{% static 'dashboard/assets/images/ADM-logo.png' %}" id="site-logo"/>
                        <p><b>CSO</b>Dashboard</p>
                    </a>
            <input type="text" id="search" placeholder="Search Post-acts..."/>
            <ul>
                <a href="{% url 'dashboard:index' %}">
                    <li>Home</li>
                </a>
                <a href="{% url 'org_list:general_orgs' %}">
                    <li>Organization List</li>
                </a>
            </ul>
            {% if messages %}
            <!--TODO [Frontend]: Change this <form> to a sign-in failed modal.-->
            <form>
                <ul class="messages">
                    {% for message in messages %}
                    <li {% if message.tags %} class="{{ notmessage.tags }}" {% endif %}>{{ message }}</li>
                    {% endfor %}
                </ul>
            </form>
            {% endif %}
            {% if user.is_authenticated %}
            <form id="sign-out" action="" method="POST">
                {% csrf_token %}
                <input type="hidden" name="logout"/>
                <button type="submit">Sign out</button>
            </form>
            {% else %}
            <button class="hallow">Sign in &nbsp;&nbsp;<i class="fa fa-caret-down"></i></button>
            <form id="sign-in" action="" method="POST">
                {% csrf_token %}
                <p>Username</p>
                <input type="text" placeholder="username" name="username" id="username"/>
                <p>Password</p>
                <input type="password" placeholder="password" name="password" id="password"/>
                <br/><br/>
                <button type="submit">Sign in</button>
            </form>
            {% endif %}
        </nav>
        <header>
            <h1>SETTINGS</h1>
        </header>
        <section class="settings-tab-wrapper">
            <nav>
                <ul>
                    <li class="active" id="audit">Audit Trail</li>
                    <li id="manage">Manage Users</li>
                    <li id="organizations">Manage Organizations</li>
                    <li id="edit">Edit Settings</li>
                </ul>
            </nav>
        </section>
        <section class="fill" id="audit-trail">

            <table cellspacing="0" cellpadding="0" border="0" class="users-table">
                <tr class="headers">
                    <th>Timestamp</th>
                    <th>Username</th>
                    <th>Action</th>
                    <th>Post-act Title</th>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>
                <tr>
                    <td>2017/01/01 13:31</td>
                    <td>hordy.mojica</td>
                    <td>Changed post-act status to Early Complete</td>
                    <td>Thesis-It!</td>
                </tr>

            </table>
        </section>
        <section class="fill" id="manage-users">
            <div class="user-tray">
                {% verbatim %}
                <h3 ng-show="selectUsers == 0">All Users: No users selected</h3>
                <h3 ng-show="selectUsers == 1">All Users: 1 user selected</h3>
                <h3 ng-show="selectUsers > 1">All Users: {{selectUsers}} users selected</h3>
                {% endverbatim %}

                <div>
                    <button id="btn-del-user" ng-click="modalDelUser(checkers)" class="grey">- Delete Users</button>
                    <button id="btn-add-user" ng-click="modalAddUserShow()">+ Add Users</button>
                </div>
            </div>
            <table cellspacing="0" cellpadding="0" border="0" class="users-table">
                <tr class="headers">
                    <th></th>
                    <th>Username</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Post-acts Checked</th>
                    <th></th>
                </tr>
                {% verbatim %}
                <tr ng-repeat="checker in checkers" >
                    <td><input type="checkbox" ng-model="checker.SELECTED" ng-true-value="'Y'" ng-false-value="'N'" ng-change="updateSelectCount(checkers)"/></td>
                    <td>{{ checker.username }}</td>
                    <td>{{ checker.firstName }}</td>
                    <td>{{ checker.lastName }}</td>
                    <td>{{ checker.email }}</td>
                    <td>{{ checker.postActsChecked }}</td>
                    <td><button ng-click="showModal(checker)">Edit User</button></td>
                </tr>
                {% endverbatim %}
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
                <!--<tr>-->
                    <!--<td><input type="checkbox"/></td>-->
                    <!--<td>hordymojica</td>-->
                    <!--<td>Hordy</td>-->
                    <!--<td>Mojica</td>-->
                    <!--<td>hordymojica@gmail.com</td>-->
                    <!--<td>34</td>-->
                <!--</tr>-->
            </table>
        </section>
        <section id="edit-settings" class="fill">
            <h3>Archive Post-acts</h3>
            <div class="settings-content-wrapper">
                <h4 class="neutral">Google Sheets Link:</h4>
                <input type="text" placeholder="https://github.com/sofenggs18agroup2"/>
                <button id="btn-modal-test" ng-click="modalTest()">Open Test Modal</button>
            </div>
            <h3>Set default term</h3>
            <div class="settings-content-wrapper">
                <h4 class="neutral">Set Default Term:</h4>
                <select>
                    <option>Term 1</option>
                    <option>Term 2</option>
                    <option>Term 3</option>
                </select>
            </div>
            <div class="flex-end">
                <button class="hallow">Discard</button>
                <button>Save</button>
            </div>
        </section>
    </body>
</html>